#!/usr/bin/env perl

use strict;
use warnings;
use Geo::Coder::OSM;
use Data::Dumper;

# my $place = '87 Roland Avenue, Coventry, Warwickshire, England';
# my $place = '95 Halfway Road, Minster, Sheppey, Kent, England';
# my $place = 'Ss Cosmus and Damian, Blean, Kent, England';
my $place = 'St Nicholas Church, New Romney, Kent, England';

my %location_mappings = (
	'Coventry, Warwickshire, England' => 'Coventry, England',
	'Minster, Sheppey, Kent' => 'Minster, Swale, Kent'
);

while(my($key, $value) = each %location_mappings) {
	# warn $map;
	# warn $place;
	if($place =~ /(.*)$key(.*)/) {
		$place = "$1$value$2";
		last;
	}
}

my $geocoder = Geo::Coder::OSM->new();
my @rc = $geocoder->geocode(location => $place);

print Data::Dumper->new([\@rc])->Dump();
